{
   "README" : "HTML macros for the what-u-need site",
   "_dateCreated" : "Fri Apr 19 00:34:50 2013",
   "_useCount" : 16,
   "html" : {
      "README" : "HTML rendering code",
      "html-controls" : "(def-fn edit-view-control-label (tail)\n  (=? tail '')\n  (concat (if (defined? $userid) edit view) \"$tail top page source\"))\n\n(def-fn html-controls-one (url label)\n  (if (defined? $url)\n    (html-a {href $url} $label)\n    $label))\n\n(fn () [\n  (html-controls-one (self-url e) (edit-view-control-label))\n])",
      "html-one-utility" : "(= _draggable-frag (sprintf\n  'id=\"x%s\" draggable=\"true\" ondragstart=\"drag(event)\"'\n  (++id)\n))\n\n(fn (path -- rm-text title label)\n  (if (undef? $path) (return))\n\n  (report ' >> (%s %s)' $. $path)\n\n  (= path    \"/utilities$path\")\n  (= rm-text (split '\\n' (hash-get $self $path README)))\n  (= title   (shift $rm-text))\n  (= label   (if (defined? $userid) Edit View))\n\n  [\n      (sprintf '<table %s width=\"100%\">' $_draggable-frag)\n      <tr>\n      '<td align=\"left\">' (html-b $title) </td>\n      '<td align=\"right\" width=\"30%\">'\n          (bracket-link (html-a {href (self-url e $path)} \"<b>${label}</b>\"))\n          (bracket-link (html-a {href (self-url x $path)} '<b>Run</b>'))\n      </td>\n      </tr>\n      <tr>\n      <td> $rm-text </td>\n      </tr>\n      </table>\n    ''\n  ])",
      "html-utility-heading" : "(def-fn html-utility-heading--no-link (text text2)\n  (html-utility-heading $text $text2 (true)))\n\n(fn (text text2 supress-link? -- text3 url log-in-out edit-url)\n  (if (list? $text2) (do\n    (= texts $text2)\n    (= text2 (shift $texts))\n    (= text3 (shift $texts))\n  ))\n\n  (= url (if (! $supress-link?) (self-url x $path)))\n  (= log-in-out (if (defined? $userid) logout login))\n  (= edit-url /api/dple/top-page?_workspaceName=/lib-what-u-need)\n\n[\n  '<table width=\"100%\">' <tr>\n  <td>\n    (html-h 2 (html-controls-one $url $text))\n    (html-p $text2)\n  </td>\n  '<td valign=\"top\" align=\"right\">'\n    (if (defined? $userid) \" $userid ($workspace-name)\")\n    (bracket-link (html-a {href \"/api/dplx/user/$log-in-out\"}  $log-in-out))\n    (bracket-link (html-a {href  /api/dplx/top-page}           'back to top page'))\n    (bracket-link (html-a {href  $edit-url}                    (edit-view-control-label)))\n    (if (defined? $text3) [ <br/> $text3 ])\n   </td>\n  </tr></table>\n])"
   },
   "on-load" : "(fn ()\n  (def-hash-fn $self {\n    /html [\n      html-utility-heading\n      html-one-utility\n      html-controls\n    ]\n  })\n)",
   "rcs-id" : "$Id: HTML-macros-what-u-need,v 1.19 2013/04/21 03:28:58 apache Exp apache $"
}
