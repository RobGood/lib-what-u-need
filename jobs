{
   "README" : "This is a knock-off of a jobs posting API that Parse has.\n\nIt took an hour to write.\n\nSee https://www.parse.com/jobs for the inspiration.",
   "_dateCreated" : "Fri Feb  3 14:15:16 2012",
   "_useCount" : 73,
   "api-entry-points" : "{\n  GET/        usage\n  POST/apply  apply\n  GET/view    view\n}",
   "api-handlers" : {
      "apply" : "(= application (desc-from-string $request-content))\n(report 'got: %s from %s at %s'\n  (desc-to-string $application) $remote-addr (date))\n\n(= d-name jobs.applications)\n\n(atomic \"jobs-$d-name\"\n  (desc-read desc $d-name)\n  (= -latest (list $desc / latest))\n\n  (if (undef? (= recs (hash-get @$-latest)))\n    (= recs (hash-set @$-latest (list))))\n\n  (if (undef? $recs) (throw 'recs should be defined here.'))\n\n  (unshift $recs {\n    application $application\n    date        (date)\n    from        (ip-addr-to-dns-name $remote-addr)\n    headers     (http-headers)\n  })\n\n  (desc-write $desc $d-name))\n\n(ct)(bl)\n()",
      "usage" : "(= README (hash-get $self / README))\n\n(reply-text <<FINI\n\n$README\n\n-------------------------------------------------------------------------------------------------\n\nTo apply for a Primal Developer role, please POST a JSON object to this URL:\n\n  http://$app-host/api/jobs/apply\n\nThe JSON object should include these keys:\n\n  name:  a string with your full name.\n  email: a string with your email address.\n  about: a string with some prose telling us a little about yourself and why you'd be a great fit.\n  urls:  an array of strings with links to your résumé, projects, samples, etc.\n\nFINI)",
      "view" : "(= d-name jobs.applications)\n(desc-read desc $d-name)\n\n(reply-json $desc)"
   },
   "on-load" : "(fn () (= app-host (hash-get (http-headers) / Host)))",
   "rcs-id" : "$Id: jobs,v 1.77 2012/04/25 20:48:32 apache Exp apache $",
   "request-from-client" : {
      "schema" : {
         "HTTP" : {
            "GET" : {
               ".on-match." : "(hash-eval $self /api-handlers usage)",
               "view" : {
                  ".on-match." : "(hash-eval $self /api-handlers view)"
               }
            },
            "POST" : {
               "apply" : {
                  ".on-match." : "(hash-eval $self /api-handlers apply)"
               }
            }
         }
      }
   }
}
